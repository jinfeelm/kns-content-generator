<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KNS 카페 콘텐츠 생성기 v3.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .blinking-cursor {
            display: inline-block;
            width: 8px;
            height: 1.2em;
            background-color: #60a5fa;
            animation: blink 1s step-end infinite;
            margin-left: 2px;
            vertical-align: bottom;
        }
        @keyframes blink {
            from, to { background-color: transparent; }
            50% { background-color: #60a5fa; }
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #1e293b;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            border: 1px solid #334155;
            font-size: 0.8rem;
            font-weight: 400;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-200 antialiased">

    <div class="container mx-auto p-4 md:p-8 min-h-screen flex flex-col">
        <!-- Header -->
        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-emerald-400 mb-2 inline-flex items-center">
                KNS 카페 콘텐츠 생성기
                 <div class="tooltip ml-2">
                    <span class="text-sky-400 border border-sky-400/50 rounded-full w-5 h-5 flex items-center justify-center text-sm font-mono cursor-help">i</span>
                    <span class="tooltiptext">AI가 생성하는 콘텐츠는 템플릿입니다. [OO고]와 같은 빈칸은 실제 내용에 맞게 수정하여 사용해주세요.</span>
                </div>
            </h1>
            <p class="text-slate-400 text-lg">ver 3.0 <span class="text-xs ml-1 px-2 py-0.5 bg-purple-500/20 text-purple-400 rounded-full">Dynamic Persona</span></p>
            <p class="text-sm text-slate-500 mt-2">100명의 KNS 마케터를 위한 AI 기반 콘텐츠 제작 솔루션</p>
        </header>

        <!-- Main Content -->
        <main class="flex-grow grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Control Panel -->
            <div class="bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-700 flex flex-col">
                <div class="space-y-6 flex-grow">
                    <!-- 1. Persona Selection -->
                    <div>
                        <label for="persona" class="block text-lg font-bold text-slate-300 mb-2">1. 페르소나 선택 (누가?)</label>
                        <p class="text-sm text-slate-400 mb-3">담당 학년에 맞는 엄마를 선택해주세요.</p>
                        <select id="persona" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition text-base">
                            <option value="영재반 준비맘">영재반 준비맘 (초2~4)</option>
                            <option value="특목·자사고 준비맘">특목·자사고 준비맘 (초5~6)</option>
                            <option value="자유학년제 전략맘">자유학년제 전략맘 (중1)</option>
                            <option value="내신 격전지맘">내신 격전지맘 (중2)</option>
                            <option value="고입 최종관문맘">고입 최종관문맘 (중3)</option>
                        </select>
                    </div>

                    <!-- 2. Goal Selection -->
                    <div class="bg-slate-900/50 p-4 rounded-lg border border-emerald-500/30">
                        <h3 class="text-lg font-bold text-emerald-400 mb-3">2. 글 목표 선택 (무엇을?)</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                            <button id="goalBtnConcern" class="text-left p-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition">
                                <span class="text-xl">🤔</span>
                                <span class="font-semibold block mt-1">고민/질문 있어요</span>
                                <p class="text-xs text-slate-400">학습, 진로, 관계에 대한 고민을 나눠요.</p>
                            </button>
                            <button id="goalBtnInfo" class="text-left p-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition">
                                <span class="text-xl">💡</span>
                                <span class="font-semibold block mt-1">유용한 정보 공유</span>
                                <p class="text-xs text-slate-400">KNS 소식, 입시 정보를 공유해요.</p>
                            </button>
                            <button id="goalBtnDaily" class="text-left p-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition">
                                <span class="text-xl">☀️</span>
                                <span class="font-semibold block mt-1">가벼운 일상/유머</span>
                                <p class="text-xs text-slate-400">소소한 이야기로 친목을 다져요.</p>
                            </button>
                            <button id="goalBtnComment" class="text-left p-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition">
                                <span class="text-xl">💬</span>
                                <span class="font-semibold block mt-1">자연스러운 댓글 달기</span>
                                 <p class="text-xs text-slate-400">기존 글에 공감과 의견을 더해요.</p>
                            </button>
                        </div>
                    </div>

                    <!-- Advanced Controls (Hidden by default) -->
                    <button id="toggleAdvanced" class="w-full text-sm text-slate-400 hover:text-white py-2 bg-slate-700/50 rounded-lg">⚙️ 전문가 모드 열기</button>
                    <div id="advancedControls" class="hidden space-y-6 pt-4 border-t border-slate-700">
                        <h2 class="text-xl font-bold text-slate-400">상세 설정 (선택)</h2>
                        <!-- Scenario Setting -->
                        <div>
                            <label for="scenario" class="block text-sm font-medium text-slate-300 mb-2">상황 설정</label>
                            <select id="scenario" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition">
                                <!-- Options will be populated by JS -->
                            </select>
                        </div>

                        <!-- Content Type Selection -->
                        <div class="grid grid-cols-2 gap-2">
                            <button id="postModeBtn" class="bg-emerald-500 text-white py-2 px-4 rounded-lg font-medium transition hover:bg-emerald-600">
                                📝 글 작성
                            </button>
                            <button id="commentModeBtn" class="bg-slate-700 text-slate-300 py-2 px-4 rounded-lg font-medium transition hover:bg-slate-600">
                                💬 댓글 작성
                            </button>
                        </div>

                        <!-- Post Type Selection (for 글 작성 모드) -->
                        <div id="postTypeSection">
                            <label for="postType" class="block text-sm font-medium text-slate-300 mb-2">글 유형 선택</label>
                            <select id="postType" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition">
                                <option value="SOS형">SOS형 (고민 토로/질문)</option>
                                <option value="공유형">공유형 (정보/경험담)</option>
                                <option value="Q&A형">Q&A형 (단순 문의)</option>
                            </select>
                        </div>

                        <!-- Reference Post Input (for 댓글 작성 모드) -->
                        <div id="referencePostSection" class="hidden">
                            <label for="referencePost" class="block text-sm font-medium text-slate-300 mb-2">참조할 글 내용</label>
                            <textarea id="referencePost" rows="4" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition resize-none" placeholder="댓글을 달고 싶은 기존 글의 제목과 내용을 여기에 입력하세요..."></textarea>
                        </div>

                        <!-- Category Selection -->
                        <div>
                            <label for="category" class="block text-sm font-medium text-slate-300 mb-2">콘텐츠 카테고리 선택</label>
                            <select id="category" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition">
                                <option value="KNS 자체 콘텐츠">KNS 자체 콘텐츠 (수단비/앤솔로지)</option>
                                <option value="학습법/공부 습관">학습법 / 공부 습관</option>
                                <option value="학교 정보/입시 전략">학교 정보 / 입시 전략</option>
                                <option value="자녀 관계/멘탈 관리">자녀 관계 / 멘탈 관리</option>
                                <option value="학원 생활/시스템 문의">학원 생활 / 시스템 문의</option>
                                <option value="일상/유머">일상 / 유머</option>
                            </select>
                        </div>
                        
                        <!-- Length Selection -->
                        <div>
                            <label for="postLength" class="block text-sm font-medium text-slate-300 mb-2">글 길이 선택</label>
                            <select id="postLength" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition">
                                <option value="자동">자동 (AI가 판단)</option>
                                <option value="짧게">짧게 (1~3줄)</option>
                                <option value="보통">보통 (4~10줄)</option>
                                <option value="길게">길게 (10줄 이상)</option>
                            </select>
                        </div>
                    </div>

                    <!-- User Information -->
                    <div class="pt-4 border-t border-slate-700/50">
                        <label for="userName" class="block text-sm font-medium text-slate-300 mb-2">작성자 정보 (팀 관리용)</label>
                        <input type="text" id="userName" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition text-sm" placeholder="예: 김마케터, 이강사, 박팀장">
                    </div>
                </div>

                <!-- Generate Button Placeholder, to be replaced by goal buttons in simple mode -->
                <div id="generateBtnContainer" class="mt-8">
                     <button id="generateBtn" class="w-full bg-gradient-to-r from-sky-500 to-emerald-500 text-white font-bold py-3 px-4 rounded-lg hover:from-sky-600 hover:to-emerald-600 transition-all duration-300 shadow-lg hover:shadow-emerald-500/50 transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-wait">
                        🚀 콘텐츠 생성하기
                    </button>
                </div>
            </div>

            <!-- Output Area -->
            <div class="bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-700 flex flex-col">
                <div class="flex justify-between items-center border-b border-slate-700 pb-4 mb-6">
                    <h2 class="text-2xl font-bold text-sky-400">생성된 콘텐츠 ✍️</h2>
                    <div class="flex gap-2">
                        <button id="historyBtn" class="bg-slate-700 text-sm text-slate-300 py-1 px-3 rounded-md hover:bg-slate-600 transition">
                            📚 히스토리
                        </button>
                        <button id="statsBtn" class="bg-slate-700 text-sm text-slate-300 py-1 px-3 rounded-md hover:bg-slate-600 transition">
                            📊 통계
                        </button>
                        <button id="copyBtn" class="bg-slate-700 text-sm text-slate-300 py-1 px-3 rounded-md hover:bg-slate-600 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            복사하기
                        </button>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-2 mb-4">
                    <input id="cafeIdInput" type="text" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition text-sm" placeholder="카페 ID (clubid)">
                    <input id="menuIdInput" type="text" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition text-sm" placeholder="메뉴 ID (board/menu)">
                </div>
                <div id="output" class="flex-grow bg-slate-900/50 p-4 rounded-lg text-slate-300 whitespace-pre-wrap overflow-y-auto leading-relaxed">
                    <div id="placeholder" class="h-full flex items-center justify-center text-slate-500">
                        <p class="text-center">
                            <span class="text-lg font-semibold">1. 페르소나를 선택</span>하고, <br>
                            <span class="text-lg font-semibold">2. 글의 목표 버튼</span>을 누르면<br>
                            AI가 매번 새로운 컨셉의 콘텐츠를 생성합니다!
                        </p>
                    </div>
                    <div id="loading" class="hidden h-full flex items-center justify-center text-slate-500">
                        <svg class="animate-spin -ml-1 mr-3 h-8 w-8 text-emerald-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <p>AI가 새로운 페르소나에 빙의하는 중...</p>
                    </div>
                    <div id="result" class="hidden fade-in">
                        <h3 id="resultTitle" class="text-lg font-bold text-sky-300 mb-4"></h3>
                        <div class="flex items-center mb-4">
                            <span id="resultPersonaIcon" class="text-2xl mr-2"></span>
                            <span id="resultPersonaName" class="font-semibold text-emerald-400"></span>
                        </div>
                        <div id="resultBody"></div>
                        <div class="mt-4 flex gap-2">
                            <button id="rewriteHookBtn" class="bg-slate-700 text-sm text-slate-300 py-1 px-3 rounded-md hover:bg-slate-600 transition">후킹 문장 바꾸기</button>
                            <button id="rewriteLineBtn" class="bg-slate-700 text-sm text-slate-300 py-1 px-3 rounded-md hover:bg-slate-600 transition">한 줄 바꾸기</button>
                        </div>
                    </div>
                </div>
                 <div class="flex gap-2 mt-4">
                    <button id="naverLoginBtn" class="flex-1 bg-emerald-600 text-sm text-white py-2 px-3 rounded-md hover:bg-emerald-500 transition">
                        네이버 로그인
                    </button>
                    <button id="naverPostBtn" class="flex-1 bg-sky-600 text-sm text-white py-2 px-3 rounded-md hover:bg-sky-500 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        카페에 올리기
                    </button>
                    <button id="openPostedBtn" class="flex-1 bg-slate-700 text-sm text-slate-300 py-2 px-3 rounded-md hover:bg-slate-600 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        게시글 확인
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals (History, Statistics) -->
    <!-- ... (Modal HTML is unchanged, so it is omitted for brevity) ... -->
    <div id="historyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4"> <div class="bg-slate-800 rounded-2xl shadow-xl border border-slate-700 w-full max-w-4xl max-h-[80vh] flex flex-col"> <div class="flex justify-between items-center p-6 border-b border-slate-700"> <h3 class="text-2xl font-bold text-sky-400">📚 생성된 콘텐츠 히스토리</h3> <button id="closeHistoryBtn" class="text-slate-400 hover:text-white text-2xl">&times;</button> </div> <div id="historyContent" class="flex-1 overflow-y-auto p-6"> <div id="historyList" class="space-y-4"></div> </div> </div> </div>
    <div id="statsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4"> <div class="bg-slate-800 rounded-2xl shadow-xl border border-slate-700 w-full max-w-5xl max-h-[80vh] flex flex-col"> <div class="flex justify-between items-center p-6 border-b border-slate-700"> <h3 class="text-2xl font-bold text-sky-400">📊 콘텐츠 생성 통계</h3> <button id="closeStatsBtn" class="text-slate-400 hover:text-white text-2xl">&times;</button> </div> <div id="statsContent" class="flex-1 overflow-y-auto p-6"> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"> <div class="bg-slate-700 p-4 rounded-lg"> <h4 class="text-lg font-bold text-emerald-400 mb-4">📈 전체 통계</h4> <div id="overallStats" class="space-y-2"></div> </div> <div class="bg-slate-700 p-4 rounded-lg"> <h4 class="text-lg font-bold text-emerald-400 mb-4">👥 작성자별 통계</h4> <div id="userStats" class="space-y-2"></div> </div> <div class="bg-slate-700 p-4 rounded-lg"> <h4 class="text-lg font-bold text-emerald-400 mb-4">📂 카테고리별 통계</h4> <div id="categoryStats" class="space-y-2"></div> </div> <div class="bg-slate-700 p-4 rounded-lg"> <h4 class="text-lg font-bold text-emerald-400 mb-4">🎭 페르소나별 통계</h4> <div id="personaStats" class="space-y-2"></div> </div> </div> <div class="mt-6 bg-slate-700 p-4 rounded-lg"> <h4 class="text-lg font-bold text-emerald-400 mb-4">🕒 최근 활동</h4> <div id="recentActivity" class="space-y-2"></div> </div> </div> </div> </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
