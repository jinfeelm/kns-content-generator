<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KNS ì¹´í˜ ì½˜í…ì¸  ìƒì„±ê¸° v3.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #1e293b;
        }
        ::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #64748b;
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .blinking-cursor {
            display: inline-block;
            width: 8px;
            height: 1.2em;
            background-color: #60a5fa;
            animation: blink 1s step-end infinite;
            margin-left: 2px;
            vertical-align: bottom;
        }
        @keyframes blink {
            from, to { background-color: transparent; }
            50% { background-color: #60a5fa; }
        }
        .tooltip {
            position: relative;
            display: inline-block;
        }
        .tooltip .tooltiptext {
            visibility: hidden;
            width: 220px;
            background-color: #1e293b;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 8px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            margin-left: -110px;
            opacity: 0;
            transition: opacity 0.3s;
            border: 1px solid #334155;
            font-size: 0.8rem;
            font-weight: 400;
        }
        .tooltip:hover .tooltiptext {
            visibility: visible;
            opacity: 1;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-200 antialiased">

    <div class="container mx-auto p-4 md:p-8 min-h-screen flex flex-col">
        <!-- Header -->
        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-3xl md:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-sky-400 to-emerald-400 mb-2 inline-flex items-center">
                KNS ì¹´í˜ ì½˜í…ì¸  ìƒì„±ê¸°
                 <div class="tooltip ml-2">
                    <span class="text-sky-400 border border-sky-400/50 rounded-full w-5 h-5 flex items-center justify-center text-sm font-mono cursor-help">i</span>
                    <span class="tooltiptext">AIê°€ ìƒì„±í•˜ëŠ” ì½˜í…ì¸ ëŠ” í…œí”Œë¦¿ì…ë‹ˆë‹¤. [OOê³ ]ì™€ ê°™ì€ ë¹ˆì¹¸ì€ ì‹¤ì œ ë‚´ìš©ì— ë§ê²Œ ìˆ˜ì •í•˜ì—¬ ì‚¬ìš©í•´ì£¼ì„¸ìš”.</span>
                </div>
            </h1>
            <p class="text-slate-400 text-lg">ver 3.0 <span class="text-xs ml-1 px-2 py-0.5 bg-purple-500/20 text-purple-400 rounded-full">Dynamic Persona</span></p>
            <p class="text-sm text-slate-500 mt-2">100ëª…ì˜ KNS ë§ˆì¼€í„°ë¥¼ ìœ„í•œ AI ê¸°ë°˜ ì½˜í…ì¸  ì œì‘ ì†”ë£¨ì…˜</p>
        </header>

        <!-- Main Content -->
        <main class="flex-grow grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Control Panel -->
            <div class="bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-700 flex flex-col">
                <div class="space-y-6 flex-grow">
                    <!-- 1. Persona Selection -->
                    <div>
                        <label for="persona" class="block text-lg font-bold text-slate-300 mb-2">1. í˜ë¥´ì†Œë‚˜ ì„ íƒ (ëˆ„ê°€?)</label>
                        <p class="text-sm text-slate-400 mb-3">ë‹´ë‹¹ í•™ë…„ì— ë§ëŠ” ì—„ë§ˆë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
                        <select id="persona" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2.5 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition text-base">
                            <option value="ì˜ì¬ë°˜ ì¤€ë¹„ë§˜">ì˜ì¬ë°˜ ì¤€ë¹„ë§˜ (ì´ˆ2~4)</option>
                            <option value="íŠ¹ëª©Â·ìì‚¬ê³  ì¤€ë¹„ë§˜">íŠ¹ëª©Â·ìì‚¬ê³  ì¤€ë¹„ë§˜ (ì´ˆ5~6)</option>
                            <option value="ììœ í•™ë…„ì œ ì „ëµë§˜">ììœ í•™ë…„ì œ ì „ëµë§˜ (ì¤‘1)</option>
                            <option value="ë‚´ì‹  ê²©ì „ì§€ë§˜">ë‚´ì‹  ê²©ì „ì§€ë§˜ (ì¤‘2)</option>
                            <option value="ê³ ì… ìµœì¢…ê´€ë¬¸ë§˜">ê³ ì… ìµœì¢…ê´€ë¬¸ë§˜ (ì¤‘3)</option>
                        </select>
                    </div>

                    <!-- 2. Goal Selection -->
                    <div class="bg-slate-900/50 p-4 rounded-lg border border-emerald-500/30">
                        <h3 class="text-lg font-bold text-emerald-400 mb-3">2. ê¸€ ëª©í‘œ ì„ íƒ (ë¬´ì—‡ì„?)</h3>
                        <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                            <button id="goalBtnConcern" class="text-left p-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition">
                                <span class="text-xl">ğŸ¤”</span>
                                <span class="font-semibold block mt-1">ê³ ë¯¼/ì§ˆë¬¸ ìˆì–´ìš”</span>
                                <p class="text-xs text-slate-400">í•™ìŠµ, ì§„ë¡œ, ê´€ê³„ì— ëŒ€í•œ ê³ ë¯¼ì„ ë‚˜ëˆ ìš”.</p>
                            </button>
                            <button id="goalBtnInfo" class="text-left p-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition">
                                <span class="text-xl">ğŸ’¡</span>
                                <span class="font-semibold block mt-1">ìœ ìš©í•œ ì •ë³´ ê³µìœ </span>
                                <p class="text-xs text-slate-400">KNS ì†Œì‹, ì…ì‹œ ì •ë³´ë¥¼ ê³µìœ í•´ìš”.</p>
                            </button>
                            <button id="goalBtnDaily" class="text-left p-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition">
                                <span class="text-xl">â˜€ï¸</span>
                                <span class="font-semibold block mt-1">ê°€ë²¼ìš´ ì¼ìƒ/ìœ ë¨¸</span>
                                <p class="text-xs text-slate-400">ì†Œì†Œí•œ ì´ì•¼ê¸°ë¡œ ì¹œëª©ì„ ë‹¤ì ¸ìš”.</p>
                            </button>
                            <button id="goalBtnComment" class="text-left p-3 bg-slate-700 hover:bg-slate-600 rounded-lg transition">
                                <span class="text-xl">ğŸ’¬</span>
                                <span class="font-semibold block mt-1">ìì—°ìŠ¤ëŸ¬ìš´ ëŒ“ê¸€ ë‹¬ê¸°</span>
                                 <p class="text-xs text-slate-400">ê¸°ì¡´ ê¸€ì— ê³µê°ê³¼ ì˜ê²¬ì„ ë”í•´ìš”.</p>
                            </button>
                        </div>
                    </div>

                    <!-- Advanced Controls (Hidden by default) -->
                    <button id="toggleAdvanced" class="w-full text-sm text-slate-400 hover:text-white py-2 bg-slate-700/50 rounded-lg">âš™ï¸ ì „ë¬¸ê°€ ëª¨ë“œ ì—´ê¸°</button>
                    <div id="advancedControls" class="hidden space-y-6 pt-4 border-t border-slate-700">
                        <h2 class="text-xl font-bold text-slate-400">ìƒì„¸ ì„¤ì • (ì„ íƒ)</h2>
                        <!-- Scenario Setting -->
                        <div>
                            <label for="scenario" class="block text-sm font-medium text-slate-300 mb-2">ìƒí™© ì„¤ì •</label>
                            <select id="scenario" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition">
                                <!-- Options will be populated by JS -->
                            </select>
                        </div>

                        <!-- Content Type Selection -->
                        <div class="grid grid-cols-2 gap-2">
                            <button id="postModeBtn" class="bg-emerald-500 text-white py-2 px-4 rounded-lg font-medium transition hover:bg-emerald-600">
                                ğŸ“ ê¸€ ì‘ì„±
                            </button>
                            <button id="commentModeBtn" class="bg-slate-700 text-slate-300 py-2 px-4 rounded-lg font-medium transition hover:bg-slate-600">
                                ğŸ’¬ ëŒ“ê¸€ ì‘ì„±
                            </button>
                        </div>

                        <!-- Post Type Selection (for ê¸€ ì‘ì„± ëª¨ë“œ) -->
                        <div id="postTypeSection">
                            <label for="postType" class="block text-sm font-medium text-slate-300 mb-2">ê¸€ ìœ í˜• ì„ íƒ</label>
                            <select id="postType" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition">
                                <option value="SOSí˜•">SOSí˜• (ê³ ë¯¼ í† ë¡œ/ì§ˆë¬¸)</option>
                                <option value="ê³µìœ í˜•">ê³µìœ í˜• (ì •ë³´/ê²½í—˜ë‹´)</option>
                                <option value="Q&Aí˜•">Q&Aí˜• (ë‹¨ìˆœ ë¬¸ì˜)</option>
                            </select>
                        </div>

                        <!-- Reference Post Input (for ëŒ“ê¸€ ì‘ì„± ëª¨ë“œ) -->
                        <div id="referencePostSection" class="hidden">
                            <label for="referencePost" class="block text-sm font-medium text-slate-300 mb-2">ì°¸ì¡°í•  ê¸€ ë‚´ìš©</label>
                            <textarea id="referencePost" rows="4" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition resize-none" placeholder="ëŒ“ê¸€ì„ ë‹¬ê³  ì‹¶ì€ ê¸°ì¡´ ê¸€ì˜ ì œëª©ê³¼ ë‚´ìš©ì„ ì—¬ê¸°ì— ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                        </div>

                        <!-- Category Selection -->
                        <div>
                            <label for="category" class="block text-sm font-medium text-slate-300 mb-2">ì½˜í…ì¸  ì¹´í…Œê³ ë¦¬ ì„ íƒ</label>
                            <select id="category" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition">
                                <option value="KNS ìì²´ ì½˜í…ì¸ ">KNS ìì²´ ì½˜í…ì¸  (ìˆ˜ë‹¨ë¹„/ì•¤ì†”ë¡œì§€)</option>
                                <option value="í•™ìŠµë²•/ê³µë¶€ ìŠµê´€">í•™ìŠµë²• / ê³µë¶€ ìŠµê´€</option>
                                <option value="í•™êµ ì •ë³´/ì…ì‹œ ì „ëµ">í•™êµ ì •ë³´ / ì…ì‹œ ì „ëµ</option>
                                <option value="ìë…€ ê´€ê³„/ë©˜íƒˆ ê´€ë¦¬">ìë…€ ê´€ê³„ / ë©˜íƒˆ ê´€ë¦¬</option>
                                <option value="í•™ì› ìƒí™œ/ì‹œìŠ¤í…œ ë¬¸ì˜">í•™ì› ìƒí™œ / ì‹œìŠ¤í…œ ë¬¸ì˜</option>
                                <option value="ì¼ìƒ/ìœ ë¨¸">ì¼ìƒ / ìœ ë¨¸</option>
                            </select>
                        </div>
                        
                        <!-- Length Selection -->
                        <div>
                            <label for="postLength" class="block text-sm font-medium text-slate-300 mb-2">ê¸€ ê¸¸ì´ ì„ íƒ</label>
                            <select id="postLength" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition">
                                <option value="ìë™">ìë™ (AIê°€ íŒë‹¨)</option>
                                <option value="ì§§ê²Œ">ì§§ê²Œ (1~3ì¤„)</option>
                                <option value="ë³´í†µ">ë³´í†µ (4~10ì¤„)</option>
                                <option value="ê¸¸ê²Œ">ê¸¸ê²Œ (10ì¤„ ì´ìƒ)</option>
                            </select>
                        </div>
                    </div>

                    <!-- User Information -->
                    <div class="pt-4 border-t border-slate-700/50">
                        <label for="userName" class="block text-sm font-medium text-slate-300 mb-2">ì‘ì„±ì ì •ë³´ (íŒ€ ê´€ë¦¬ìš©)</label>
                        <input type="text" id="userName" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition text-sm" placeholder="ì˜ˆ: ê¹€ë§ˆì¼€í„°, ì´ê°•ì‚¬, ë°•íŒ€ì¥">
                    </div>
                </div>

                <!-- Generate Button Placeholder, to be replaced by goal buttons in simple mode -->
                <div id="generateBtnContainer" class="mt-8">
                     <button id="generateBtn" class="w-full bg-gradient-to-r from-sky-500 to-emerald-500 text-white font-bold py-3 px-4 rounded-lg hover:from-sky-600 hover:to-emerald-600 transition-all duration-300 shadow-lg hover:shadow-emerald-500/50 transform hover:-translate-y-1 disabled:opacity-50 disabled:cursor-wait">
                        ğŸš€ ì½˜í…ì¸  ìƒì„±í•˜ê¸°
                    </button>
                </div>
            </div>

            <!-- Output Area -->
            <div class="bg-slate-800 p-6 rounded-2xl shadow-lg border border-slate-700 flex flex-col">
                <div class="flex justify-between items-center border-b border-slate-700 pb-4 mb-6">
                    <h2 class="text-2xl font-bold text-sky-400">ìƒì„±ëœ ì½˜í…ì¸  âœï¸</h2>
                    <div class="flex gap-2">
                        <button id="historyBtn" class="bg-slate-700 text-sm text-slate-300 py-1 px-3 rounded-md hover:bg-slate-600 transition">
                            ğŸ“š íˆìŠ¤í† ë¦¬
                        </button>
                        <button id="statsBtn" class="bg-slate-700 text-sm text-slate-300 py-1 px-3 rounded-md hover:bg-slate-600 transition">
                            ğŸ“Š í†µê³„
                        </button>
                        <button id="copyBtn" class="bg-slate-700 text-sm text-slate-300 py-1 px-3 rounded-md hover:bg-slate-600 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                            ë³µì‚¬í•˜ê¸°
                        </button>
                    </div>
                </div>
                <div class="grid grid-cols-2 gap-2 mb-4">
                    <input id="cafeIdInput" type="text" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition text-sm" placeholder="ì¹´í˜ ID (clubid)">
                    <input id="menuIdInput" type="text" class="w-full bg-slate-700 border border-slate-600 rounded-lg py-2 px-3 focus:ring-2 focus:ring-emerald-500 focus:outline-none transition text-sm" placeholder="ë©”ë‰´ ID (board/menu)">
                </div>
                <div id="output" class="flex-grow bg-slate-900/50 p-4 rounded-lg text-slate-300 whitespace-pre-wrap overflow-y-auto leading-relaxed">
                    <div id="placeholder" class="h-full flex items-center justify-center text-slate-500">
                        <p class="text-center">
                            <span class="text-lg font-semibold">1. í˜ë¥´ì†Œë‚˜ë¥¼ ì„ íƒ</span>í•˜ê³ , <br>
                            <span class="text-lg font-semibold">2. ê¸€ì˜ ëª©í‘œ ë²„íŠ¼</span>ì„ ëˆ„ë¥´ë©´<br>
                            AIê°€ ë§¤ë²ˆ ìƒˆë¡œìš´ ì»¨ì…‰ì˜ ì½˜í…ì¸ ë¥¼ ìƒì„±í•©ë‹ˆë‹¤!
                        </p>
                    </div>
                    <div id="loading" class="hidden h-full flex items-center justify-center text-slate-500">
                        <svg class="animate-spin -ml-1 mr-3 h-8 w-8 text-emerald-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                          <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                        </svg>
                        <p>AIê°€ ìƒˆë¡œìš´ í˜ë¥´ì†Œë‚˜ì— ë¹™ì˜í•˜ëŠ” ì¤‘...</p>
                    </div>
                    <div id="result" class="hidden fade-in">
                        <h3 id="resultTitle" class="text-lg font-bold text-sky-300 mb-4"></h3>
                        <div class="flex items-center mb-4">
                            <span id="resultPersonaIcon" class="text-2xl mr-2"></span>
                            <span id="resultPersonaName" class="font-semibold text-emerald-400"></span>
                        </div>
                        <div id="resultBody"></div>
                        <div class="mt-4 flex gap-2">
                            <button id="rewriteHookBtn" class="bg-slate-700 text-sm text-slate-300 py-1 px-3 rounded-md hover:bg-slate-600 transition">í›„í‚¹ ë¬¸ì¥ ë°”ê¾¸ê¸°</button>
                            <button id="rewriteLineBtn" class="bg-slate-700 text-sm text-slate-300 py-1 px-3 rounded-md hover:bg-slate-600 transition">í•œ ì¤„ ë°”ê¾¸ê¸°</button>
                        </div>
                    </div>
                </div>
                 <div class="flex gap-2 mt-4">
                    <button id="naverLoginBtn" class="flex-1 bg-emerald-600 text-sm text-white py-2 px-3 rounded-md hover:bg-emerald-500 transition">
                        ë„¤ì´ë²„ ë¡œê·¸ì¸
                    </button>
                    <button id="naverPostBtn" class="flex-1 bg-sky-600 text-sm text-white py-2 px-3 rounded-md hover:bg-sky-500 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        ì¹´í˜ì— ì˜¬ë¦¬ê¸°
                    </button>
                    <button id="openPostedBtn" class="flex-1 bg-slate-700 text-sm text-slate-300 py-2 px-3 rounded-md hover:bg-slate-600 transition disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        ê²Œì‹œê¸€ í™•ì¸
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Modals (History, Statistics) -->
    <!-- ... (Modal HTML is unchanged, so it is omitted for brevity) ... -->
    <div id="historyModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4"> <div class="bg-slate-800 rounded-2xl shadow-xl border border-slate-700 w-full max-w-4xl max-h-[80vh] flex flex-col"> <div class="flex justify-between items-center p-6 border-b border-slate-700"> <h3 class="text-2xl font-bold text-sky-400">ğŸ“š ìƒì„±ëœ ì½˜í…ì¸  íˆìŠ¤í† ë¦¬</h3> <button id="closeHistoryBtn" class="text-slate-400 hover:text-white text-2xl">&times;</button> </div> <div id="historyContent" class="flex-1 overflow-y-auto p-6"> <div id="historyList" class="space-y-4"></div> </div> </div> </div>
    <div id="statsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4"> <div class="bg-slate-800 rounded-2xl shadow-xl border border-slate-700 w-full max-w-5xl max-h-[80vh] flex flex-col"> <div class="flex justify-between items-center p-6 border-b border-slate-700"> <h3 class="text-2xl font-bold text-sky-400">ğŸ“Š ì½˜í…ì¸  ìƒì„± í†µê³„</h3> <button id="closeStatsBtn" class="text-slate-400 hover:text-white text-2xl">&times;</button> </div> <div id="statsContent" class="flex-1 overflow-y-auto p-6"> <div class="grid grid-cols-1 md:grid-cols-2 gap-6"> <div class="bg-slate-700 p-4 rounded-lg"> <h4 class="text-lg font-bold text-emerald-400 mb-4">ğŸ“ˆ ì „ì²´ í†µê³„</h4> <div id="overallStats" class="space-y-2"></div> </div> <div class="bg-slate-700 p-4 rounded-lg"> <h4 class="text-lg font-bold text-emerald-400 mb-4">ğŸ‘¥ ì‘ì„±ìë³„ í†µê³„</h4> <div id="userStats" class="space-y-2"></div> </div> <div class="bg-slate-700 p-4 rounded-lg"> <h4 class="text-lg font-bold text-emerald-400 mb-4">ğŸ“‚ ì¹´í…Œê³ ë¦¬ë³„ í†µê³„</h4> <div id="categoryStats" class="space-y-2"></div> </div> <div class="bg-slate-700 p-4 rounded-lg"> <h4 class="text-lg font-bold text-emerald-400 mb-4">ğŸ­ í˜ë¥´ì†Œë‚˜ë³„ í†µê³„</h4> <div id="personaStats" class="space-y-2"></div> </div> </div> <div class="mt-6 bg-slate-700 p-4 rounded-lg"> <h4 class="text-lg font-bold text-emerald-400 mb-4">ğŸ•’ ìµœê·¼ í™œë™</h4> <div id="recentActivity" class="space-y-2"></div> </div> </div> </div> </div>

    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>
